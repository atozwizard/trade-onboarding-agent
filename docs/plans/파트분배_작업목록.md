# 물류·무역 온보딩 AI 코치 - 기능별 파트 분배

> 4일 | 4명 | 기능 단위로 1인 1기능 풀스택 담당

---

## 한눈에 보기

```
┌─────────────────────────────────────────────────────────┐
│  Day 1 오전  │  #0 공통 세팅 (전원)                      │
├──────────────┼──────────────────────────────────────────┤
│  Day 1 오후  │  #1~#4 각자 기능 개발 시작                │
│  Day 2       │  #1~#4 기능 개발 (계속)                   │
│  Day 3 오전  │  #1~#4 기능 개발 완료                     │
├──────────────┼──────────────────────────────────────────┤
│  Day 3 오후  │  #5 통합 연동 (전원)                      │
│  Day 4 오전  │  #6 대시보드 + 테스트 (전원)              │
│  Day 4 오후  │  #7 배포 + 발표 준비 (전원)               │
└──────────────┴──────────────────────────────────────────┘
```

| 순번 | 기능 | 담당 | 기간 | 비고 |
|:----:|------|:----:|------|------|
| **#0** | **공통 세팅** (프로젝트 구조, RAG, 채팅 뼈대) | 전원 | Day 1 오전 | 전원이 같이 세팅 |
| **#1** | **퀴즈 학습** (퀴즈 생성 + 채점 + 해설) | 1명 | Day 1 오후 ~ Day 3 오전 | 핵심 기능 |
| **#2** | **이메일 코칭** (이메일 수정 + 리스크 탐지) | 1명 | Day 1 오후 ~ Day 3 오전 | |
| **#3** | **실수 예측** (실수 예측 + 체크리스트) | 1명 | Day 1 오후 ~ Day 3 오전 | |
| **#4** | **대표 시뮬레이션** (보고 연습 + 피드백) | 1명 | Day 1 오후 ~ Day 3 오전 | |
| **#5** | **통합 연동** (오케스트레이터 + 전체 연결) | 전원 | Day 3 오후 | 각자 만든 기능 합치기 |
| **#6** | **대시보드 + 테스트** | 전원 | Day 4 오전 | |
| **#7** | **배포 + 발표 준비** | 전원 | Day 4 오후 | |

---

## #0. 공통 세팅 (전원 같이)

> Day 1 오전 | 전원

다 같이 모여서 프로젝트 뼈대를 잡는다.
각자 기능 개발에 들어가기 전에 **공통 구조가 통일**되어야 나중에 합칠 때 안 깨진다.

### 할 일

**프로젝트 구조 생성**
```
trade-ai-agent/
├── backend/
│   ├── main.py              ← FastAPI 진입점
│   ├── config.py            ← API 키, 설정
│   ├── agents/
│   │   ├── orchestrator.py  ← 의도 분류 + 라우팅
│   │   ├── quiz_agent.py    ← #1 담당
│   │   ├── email_agent.py   ← #2 담당
│   │   ├── mistake_agent.py ← #3 담당
│   │   └── ceo_agent.py     ← #4 담당
│   ├── rag/
│   │   ├── retriever.py     ← RAG 검색 공통 함수
│   │   └── data/            ← JSON 더미데이터
│   ├── prompts/
│   │   ├── quiz_prompt.txt
│   │   ├── email_prompt.txt
│   │   ├── mistake_prompt.txt
│   │   └── ceo_prompt.txt
│   └── api/
│       └── routes.py        ← API 엔드포인트
├── frontend/
│   └── app.py               ← Streamlit 메인
└── dataset/
    └── *.json               ← 더미데이터 파일들
```

**같이 해야 할 것들**
- [ ] Git 레포 생성 + 브랜치 전략 합의 (main + 기능별 브랜치)
- [ ] FastAPI 기본 서버 세팅 (`main.py`, CORS, config)
- [ ] Streamlit 기본 채팅 화면 세팅 (`app.py`)
- [ ] LLM API 키 세팅 + 공통 호출 함수 (`config.py`)
- [ ] 더미데이터 JSON 파일 전환 (기획서 데이터 → 7개 JSON)
- [ ] ChromaDB 세팅 + 임베딩 업로드 스크립트
- [ ] RAG 공통 검색 함수 (`retriever.py`)
- [ ] 에이전트 공통 인터페이스 합의

**에이전트 공통 인터페이스 (이걸 먼저 합의)**
```python
# 모든 에이전트는 이 형태를 따른다
class BaseAgent:
    def run(self, user_input: str, context: dict) -> dict:
        """
        Returns:
            {
                "response": str,       # 사용자에게 보여줄 응답
                "agent_type": str,     # "quiz" / "email" / "mistake" / "ceo"
                "metadata": dict       # 점수, 정답 등 추가 정보
            }
        """
```

### 완료 기준
- FastAPI 서버 실행됨 (`localhost:8000/docs`)
- Streamlit 채팅 화면 뜸 (`localhost:8501`)
- RAG 검색 테스트: "BL 오류" → 관련 문서 3개+ 반환
- 4명 모두 개발 환경 동일하게 세팅 완료

---

## #1. 퀴즈 학습 기능

> Day 1 오후 ~ Day 3 오전 | 1명 담당

신입사원이 무역 용어·상황을 퀴즈로 학습하는 기능.
**데이터 → 프롬프트 → 에이전트 → API → UI**까지 혼자 다 만든다.

### 사용자 시나리오
```
사용자: "물류 퀴즈 풀고 싶어"
    ↓
AI: 오늘의 물류 미션 [통관 절차 - 초급]

    상황: 브라질 커피 생두 BL에서 consignee 오타 발견. 도착 3일 전.

    Q. 가장 먼저 해야 할 행동은?
    1) 도착 후 수정
    2) 즉시 포워더에 수정 요청  ← 정답
    3) 다음 선적으로 변경
    4) 상사 보고 후 대기
    ↓
사용자: 2번
    ↓
AI: ✅ 정답!
    해설: 선적 후 BL 수정 시 amendment 비용 발생...
    실무 팁: 실무에서는 BL draft 단계에서 반드시 더블체크...
```

### 할 일

**데이터**
- [ ] `quiz_samples.json`에서 퀴즈용 데이터 확인 + 보강
- [ ] RAG 검색 카테고리 설정: `domain_knowledge`, `trade_qa`, `mistake_cases`

**프롬프트**
- [ ] `prompts/quiz_prompt.txt` 작성
  - 역할: "너는 15년차 무역 교육 전문가다"
  - 입력: 주제, 난이도, RAG 컨텍스트
  - 출력: 상황 설명 + 4지선다 + 정답번호 + 해설 + 실무팁
- [ ] 채점용 프롬프트 (사용자 답변 → 정답 여부 + 오답 코칭)

**에이전트**
- [ ] `agents/quiz_agent.py` 구현
  - `generate_quiz(topic, difficulty, context)` → 퀴즈 생성
  - `evaluate_answer(quiz, user_answer)` → 채점 + 해설
  - 난이도 자동 조정 (맞추면 올리고, 틀리면 유지)

**API**
- [ ] `POST /api/quiz/start` → 퀴즈 생성 반환
- [ ] `POST /api/quiz/answer` → 답변 채점 + 해설 반환

**UI (Streamlit)**
- [ ] 퀴즈 모드 화면
  - 상황 설명 카드
  - 4지선다 버튼 (radio 또는 button)
  - 정답 확인 → 해설 + 실무팁 표시
  - 점수 표시

### 완료 기준
- "퀴즈 풀고 싶어" → 상황형 문제 출제됨
- 답변 선택 → 정답/오답 판정 + 해설 표시됨
- 3번 연속 테스트 시 매번 다른 문제 생성됨

---

## #2. 이메일 코칭 기능

> Day 1 오후 ~ Day 3 오전 | 1명 담당

신입이 작성한 무역 이메일을 검토하거나, 상황에 맞는 이메일을 대신 작성해주는 기능.

### 사용자 시나리오
```
사용자: "buyer에게 선적 지연 안내 메일 써줘"
    ↓
AI: 📧 이메일 초안

    Subject: Shipment Delay Notice - Brazil Santos Coffee

    Dear Mr. Johnson,

    We regret to inform you that the shipment scheduled
    for Feb 10 will be delayed by approximately 3 days
    due to port congestion...

    ⚠️ 리스크 포인트:
    - "approximately" → 구체적 날짜 명시 권장
    - demurrage 비용 언급 없음 → buyer가 추후 클레임 가능

    💡 개선 사항:
    - 새로운 ETA 명시 필요
    - 보상/할인 조건 선제 제안 권장
```

### 할 일

**데이터**
- [ ] `communication.json`, `email_logs.json` 데이터 확인 + 보강
- [ ] RAG 검색 카테고리: `communication`, `ceo_style`

**프롬프트**
- [ ] `prompts/email_prompt.txt` 작성
  - 역할: "너는 15년차 무역회사 팀장이다"
  - 모드 1: 이메일 새로 작성 (상황 + 상대방 입력)
  - 모드 2: 기존 이메일 검토 (이메일 원문 입력)
  - 출력: 이메일 본문 + 리스크 포인트 + 개선 사항

**에이전트**
- [ ] `agents/email_agent.py` 구현
  - `draft_email(situation, recipient, context)` → 이메일 초안
  - `review_email(email_text, context)` → 리스크 탐지 + 수정안
  - 대표 커뮤니케이션 스타일 반영

**API**
- [ ] `POST /api/chat` 에서 intent=email_coach일 때 처리

**UI (Streamlit)**
- [ ] 이메일 코칭 모드 화면
  - 이메일 입력 텍스트 영역 (또는 상황 설명 입력)
  - 이메일 결과 표시 (코드블록 스타일)
  - 리스크 포인트 경고 카드
  - 개선 사항 목록

### 완료 기준
- "선적 지연 메일 써줘" → 영문 이메일 초안 생성됨
- 이메일 원문 붙여넣기 → 리스크 포인트 + 수정안 제공됨
- 리스크 포인트가 최소 2개 이상 탐지됨

---

## #3. 실수 예측 기능

> Day 1 오후 ~ Day 3 오전 | 1명 담당

업무 상황을 입력하면 신입이 범하기 쉬운 실수를 예측하고 예방 체크리스트를 제공하는 기능.

### 사용자 시나리오
```
사용자: "BL 확인할 때 주의할 점 알려줘"
    ↓
AI: 🚨 BL 확인 시 예상 실수 TOP 3

    1. Consignee 이름 오타
       - 위험: 통관 지연, BL amendment 비용 $150~300
       - 예방: 계약서 원본과 글자 단위 대조

    2. Shipping mark 누락
       - 위험: 화물 식별 불가, 입고 지연
       - 예방: packing list와 교차 확인

    3. Freight term 불일치 (collect ↔ prepaid)
       - 위험: 정산 분쟁
       - 예방: 계약서의 Incoterms 조건 재확인

    ✅ 체크리스트:
    □ Consignee/Shipper 철자 확인
    □ Notify party 정보 확인
    □ HS code 일치 확인
    □ 수량/중량 packing list 대조
    □ Freight term 계약서 대조
```

### 할 일

**데이터**
- [ ] `mistake_cases.json`, `document_errors.json`, `claims.json` 확인 + 보강
- [ ] RAG 검색 카테고리: `mistakes`, `document_errors`, `claims`

**프롬프트**
- [ ] `prompts/mistake_prompt.txt` 작성
  - 역할: "너는 무역 리스크 관리 전문가다"
  - 입력: 업무 상황 (예: "BL 확인", "통관 서류 준비")
  - 출력: 예상 실수 3개(상황+위험+예방) + 체크리스트

**에이전트**
- [ ] `agents/mistake_agent.py` 구현
  - `predict_mistakes(situation, context)` → 실수 3개 + 체크리스트
  - 각 실수에 위험도(상/중/하) + 예상 손실 금액 포함

**API**
- [ ] `POST /api/chat` 에서 intent=mistake_predict일 때 처리

**UI (Streamlit)**
- [ ] 실수 예측 모드 화면
  - 상황 입력 (텍스트 또는 프리셋 선택: BL확인/통관/선적 등)
  - 실수 카드 3개 (위험도 색상 구분)
  - 체크리스트 (체크박스 형태)

### 완료 기준
- "BL 확인 주의점" → 실수 3개 + 체크리스트 생성됨
- 각 실수에 구체적 위험 + 예방법 포함됨
- "통관 준비", "선적 서류" 등 다른 상황에도 작동됨

---

## #4. 대표 시뮬레이션 기능

> Day 1 오후 ~ Day 3 오전 | 1명 담당

대표에게 보고하는 상황을 시뮬레이션. AI가 대표 역할을 하며 질문하고 피드백을 준다.

### 사용자 시나리오
```
사용자: "대표님 보고 연습시켜줘"
    ↓
AI: 📋 오늘의 보고 시뮬레이션

    상황: 브라질 생두 20톤 선적이 3일 지연되었습니다.
    buyer에게는 아직 안내하지 않은 상태입니다.

    대표: "이번 브라질 건 어떻게 되고 있어?"
    ↓
사용자: "선적이 3일 정도 지연될 것 같습니다"
    ↓
AI(대표): "3일이면 demurrage 나오는 거 아냐?
          buyer한테는 언제 알린 거야?
          지연 사유가 뭔데?"

    📊 보고 평가:
    - 핵심 전달: ⭐⭐⭐☆☆ (지연 사실만 전달, 원인/대응 누락)
    - 선제 대응: ⭐⭐☆☆☆ (buyer 미통보 상태 보고 안 함)
    - 개선점: 지연 사유 + 예상 비용 + 대응 방안을 함께 보고할 것
```

### 할 일

**데이터**
- [ ] `ceo_criteria.json`, `ceo_style.json` 확인 + 보강
- [ ] RAG 검색 카테고리: `ceo_criteria`, `ceo_style`, `negotiation`

**프롬프트**
- [ ] `prompts/ceo_prompt.txt` 작성
  - 역할: "너는 커피 생두 무역회사 대표다. 리스크 회피형, 거래 안정성 중시, 보고 간결 선호"
  - 모드 1: 상황 생성 + 대표 질문
  - 모드 2: 사용자 답변 평가 + 피드백
  - 대표 성격: 환율 민감, 장기거래 선호, 실수 싫어함

**에이전트**
- [ ] `agents/ceo_agent.py` 구현
  - `start_simulation(context)` → 상황 생성 + 첫 질문
  - `respond_as_ceo(user_answer, context)` → 추가 질문 + 평가
  - 멀티턴 대화 지원 (2~3턴 질의응답 후 종합 평가)

**API**
- [ ] `POST /api/chat` 에서 intent=ceo_sim일 때 처리
- [ ] 세션 관리 (멀티턴 대화 맥락 유지)

**UI (Streamlit)**
- [ ] 대표 시뮬레이션 모드 화면
  - 상황 카드 (시뮬레이션 배경)
  - 대표 질문 말풍선 (다른 색상)
  - 사용자 답변 입력
  - 종합 평가 카드 (별점 + 피드백)

### 완료 기준
- "보고 연습" → 상황 생성 + 대표 첫 질문 나옴
- 답변 입력 → 대표가 추가 질문 또는 평가 제공
- 2~3턴 대화 후 종합 평가(점수 + 개선점) 표시됨

---

## #5. 통합 연동 (전원 같이)

> Day 3 오후 | 전원

각자 만든 기능을 하나로 합치는 단계.

### 할 일
- [ ] **오케스트레이터 완성**: 의도 분류 → 4개 에이전트 라우팅 연결
  - "퀴즈" → #1 Quiz Agent
  - "메일" → #2 Email Agent
  - "실수/주의" → #3 Mistake Agent
  - "보고/대표" → #4 CEO Agent
  - 그 외 → 일반 응답 또는 안내
- [ ] **UI 통합**: Streamlit 사이드바에서 모드 선택 → 각 기능 화면 전환
- [ ] **자유 채팅 모드**: 모드 선택 없이 자연어 입력 → 의도 자동 분류 → 해당 에이전트 호출
- [ ] **Git merge**: 각자 브랜치 → main 합치기 + 충돌 해결
- [ ] **통합 테스트** (아래 3개 시나리오 필수)
  1. "물류 퀴즈 풀고 싶어" → 퀴즈 출제 → 답변 → 채점
  2. "선적 지연 메일 써줘" → 이메일 초안 + 리스크 포인트
  3. "대표 보고 연습" → 상황 → 질문 → 답변 → 평가

### 완료 기준
- 하나의 채팅창에서 자연어로 4개 기능 모두 호출 가능
- 모드 전환 시 각 기능 전용 UI가 정상 표시됨

---

## #6. 대시보드 + 최종 테스트 (전원 같이)

> Day 4 오전 | 전원

### 대시보드 (2명)
- [ ] 퀴즈 점수 추이 (간단 라인 차트)
- [ ] 약점 영역 표시 (주제별 정답률)
- [ ] 최근 학습 이력 (에이전트별 사용 로그)
- [ ] 에이전트별 사용 횟수 (bar chart)

### 최종 테스트 (2명)
- [ ] 전체 시나리오 테스트 (기획서 DAY 12 시나리오 재현)
- [ ] 에이전트 응답 품질 점검 (할루시네이션 없는지)
- [ ] 응답 시간 확인 (20초 이내)
- [ ] 버그 수정

### 완료 기준
- 대시보드에 학습 데이터 표시됨
- 핵심 시나리오 3개 이상 정상 작동
- 치명적 버그 없음

---

## #7. 배포 + 발표 준비 (전원 같이)

> Day 4 오후 | 전원

### 배포 (2명)
- [ ] Backend 배포 (Railway / Fly.io / Render)
- [ ] Frontend 배포 (Streamlit Cloud / Vercel)
- [ ] 환경변수 설정 (API 키, DB 연결)
- [ ] 배포 URL 접속 테스트

### 발표 준비 (2명)
- [ ] 데모 시나리오 3개 확정 + 리허설
- [ ] 발표 슬라이드 (기획서 스토리라인 7~8분 활용)
- [ ] 기술 아키텍처 설명 슬라이드
- [ ] 역할 분담 (누가 어디를 발표할지)

### 완료 기준
- 배포 URL에서 서비스 정상 작동
- 발표 + 데모 리허설 1회 이상 완료

---

## 일정 요약

| 날짜 | 오전 | 오후 | 체크포인트 |
|------|------|------|------------|
| **Day 1** | #0 공통 세팅 (전원) | #1~#4 각자 기능 착수 | RAG 작동 + 서버 뜸 + 기능 개발 시작 |
| **Day 2** | #1~#4 기능 개발 | #1~#4 기능 개발 | 각자 에이전트 기본 동작 확인 |
| **Day 3** | #1~#4 기능 완료 | #5 통합 연동 (전원) | 하나의 채팅에서 4개 기능 작동 |
| **Day 4** | #6 대시보드+테스트 (전원) | #7 배포+발표 (전원) | 배포 완료 + 발표 준비 완료 |

---

## 비상 플랜 (시간 부족 시)

| 우선순위 | 기능 | 이유 |
|:--------:|------|------|
| **필수** | #1 퀴즈 학습 | 핵심 가치 — "실무 시뮬레이션" 데모의 중심 |
| **높음** | #2 이메일 코칭 | 발표 임팩트 큼 — 실제 결과물이 눈에 보임 |
| **중간** | #4 대표 시뮬레이션 | 차별화 포인트 — 멀티턴 대화가 인상적 |
| **낮음** | #3 실수 예측 | 가장 단순 — 시간 부족 시 먼저 드롭 |

> 3개만 완성해도 발표 충분. 최악의 경우 #1만으로도 코어 데모 가능.
